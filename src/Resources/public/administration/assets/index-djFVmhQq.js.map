{"version":3,"file":"index-djFVmhQq.js","sources":["../../../app/administration/src/module/blog-module/elements/blog-single-select/config/werkl-cms-el-config-blog-single-select.html.twig","../../../app/administration/src/module/blog-module/elements/blog-single-select/config/index.js"],"sourcesContent":["{% block werkl_cms_element_blog_single_select_config %}\r\n<div class=\"werkl-cms-el-config-blog-single-select\">\r\n    {% block werkl_cms_element_blog_single_select_config_blog_entry %}\r\n    <sw-entity-single-select\r\n        v-model:value=\"element.config.blogEntry.value\"\r\n        :label=\"$tc('werkl-blog.elements.blogSingleSelect.selectFieldLabel')\"\r\n        :placeholder=\"$tc('werkl-blog.elements.blogSingleSelect.selectFieldLabel')\"\r\n        entity=\"werkl_blog_entry\"\r\n        label-property=\"title\"\r\n        show-clearable-button\r\n        @update:value=\"onBlogEntryChange\"\r\n    />\r\n    {% endblock %}\r\n</div>\r\n{% endblock %}\r\n","import template from './werkl-cms-el-config-blog-single-select.html.twig';\r\n\r\nconst { Mixin } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\n\r\nexport default {\r\n    template,\r\n\r\n    inject: ['repositoryFactory'],\r\n\r\n    emits: ['element-update'],\r\n\r\n    mixins: [\r\n        Mixin.getByName('cms-element'),\r\n    ],\r\n\r\n    computed: {\r\n        blogEntryRepository() {\r\n            return this.repositoryFactory.create('werkl_blog_entry');\r\n        },\r\n\r\n        mediaRepository() {\r\n            return this.repositoryFactory.create('media');\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.createdComponent();\r\n    },\r\n\r\n    methods: {\r\n        createdComponent() {\r\n            this.initElementConfig('blog-single-select');\r\n        },\r\n\r\n        onBlogEntryChange(blogEntryId) {\r\n            if (!blogEntryId) {\r\n                this.element.config.blogEntry.value = null;\r\n                this.element.data.blogEntry = null;\r\n            } else {\r\n                const criteria = new Criteria();\r\n                criteria.addAssociation('blogCategories');\r\n\r\n                this.blogEntryRepository.get(blogEntryId, Shopware.Context.api, criteria).then((blogEntry) => {\r\n                    this.element.config.blogEntry.value = blogEntryId;\r\n\r\n                    if (!blogEntry.translated.mediaId) {\r\n                        this.element.data.blogEntry = blogEntry;\r\n\r\n                        return;\r\n                    }\r\n\r\n                    this.mediaRepository.get(blogEntry.translated.mediaId).then((media) => {\r\n                        blogEntry.media = media;\r\n                        this.element.data.blogEntry = blogEntry;\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.$emit('element-update', this.element);\r\n        },\r\n    },\r\n};\r\n"],"names":["template","Mixin","Criteria","index","blogEntryId","criteria","blogEntry","media"],"mappings":"AAAA,MAAeA,EAAA,6hBCET,CAAE,MAAAC,CAAO,EAAG,SACZ,CAAE,SAAAC,CAAQ,EAAK,SAAS,KAEfC,EAAA,CACX,SAAAH,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,SAAU,CACN,qBAAsB,CAClB,OAAO,KAAK,kBAAkB,OAAO,kBAAkB,CAC1D,EAED,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,oBAAoB,CAC9C,EAED,kBAAkBG,EAAa,CAC3B,GAAI,CAACA,EACD,KAAK,QAAQ,OAAO,UAAU,MAAQ,KACtC,KAAK,QAAQ,KAAK,UAAY,SAC3B,CACH,MAAMC,EAAW,IAAIH,EACrBG,EAAS,eAAe,gBAAgB,EAExC,KAAK,oBAAoB,IAAID,EAAa,SAAS,QAAQ,IAAKC,CAAQ,EAAE,KAAMC,GAAc,CAG1F,GAFA,KAAK,QAAQ,OAAO,UAAU,MAAQF,EAElC,CAACE,EAAU,WAAW,QAAS,CAC/B,KAAK,QAAQ,KAAK,UAAYA,EAE9B,MACH,CAED,KAAK,gBAAgB,IAAIA,EAAU,WAAW,OAAO,EAAE,KAAMC,GAAU,CACnED,EAAU,MAAQC,EAClB,KAAK,QAAQ,KAAK,UAAYD,CACtD,CAAqB,CACrB,CAAiB,CACJ,CAED,KAAK,MAAM,iBAAkB,KAAK,OAAO,CAC5C,CACJ,CACL"}