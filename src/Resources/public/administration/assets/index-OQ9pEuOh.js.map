{"version":3,"file":"index-OQ9pEuOh.js","sources":["../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/werkl-blog-author-detail.html.twig","../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/index.js"],"sourcesContent":["{% block werkl_blog_author_detail %}\n<sw-page class=\"werkl-blog-author-detail\">\n    <template #smart-bar-header>\n        <h2>\n            {% block werkl_blog_author_detail_smart_bar_header_title_text %}\n            {{ salutation(blogAuthor) || $tc('werkl-blog-author.detail.title') }}\n            {% endblock %}\n        </h2>\n    </template>\n\n    <template #smart-bar-actions>\n        <mt-button\n            variant=\"secondary\"\n            size=\"default\"\n            @click=\"$router.push({ name: 'blog.module.author.index' })\"\n        >\n            {{ $tc('werkl-blog-author.detail.buttonCancel') }}\n        </mt-button>\n\n        <sw-button-process\n            :is-loading=\"isLoading\"\n            :process-success=\"processSuccess\"\n            variant=\"primary\"\n            @update:process-success=\"saveFinish\"\n            @click=\"onSave\"\n        >\n            {{ $tc('werkl-blog-author.detail.buttonSave') }}\n        </sw-button-process>\n\n    </template>\n\n    <template #content>\n        <sw-card-view>\n            <sw-card v-if=\"blogAuthor\" :isLoading=\"isLoading\" :title=\"$tc('werkl-blog-author.detail.title')\">\n                <sw-container columns=\"2fr 4fr 4fr\" gap=\"16px\">\n                    <sw-entity-single-select\n                        v-model:value=\"blogAuthor.salutationId\"\n                        class=\"werkl-blog-author-base-form__salutation-select\"\n                        entity=\"salutation\"\n                        label-property=\"displayName\"\n                        required\n                        :label=\"$tc('werkl-blog-author.detail.salutation.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.salutation.placeholder')\"\n                        :error=\"blogAuthorSalutationIdError\"\n                    />\n\n                    <mt-text-field\n                        v-model=\"blogAuthor.firstName\"\n                        required\n                        :label=\"$tc('werkl-blog-author.detail.firstName.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.firstName.placeholder')\"\n                        :error=\"blogAuthorFirstNameError\"\n                    />\n\n                    <mt-text-field\n                        v-model=\"blogAuthor.lastName\"\n                        required\n                        :label=\"$tc('werkl-blog-author.detail.lastName.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.lastName.placeholder')\"\n                        :error=\"blogAuthorLastNameError\"\n                    />\n                </sw-container>\n\n                <sw-container columns=\"6fr 4fr\" gap=\"24px\">\n                    <mt-text-field\n                        v-model=\"blogAuthor.displayName\"\n                        :label=\"$tc('werkl-blog-author.detail.displayName.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.displayName.placeholder')\"\n                        :error=\"blogAuthorDisplayNameError\"\n                    />\n\n                    <mt-text-field\n                        v-model=\"blogAuthor.email\"\n                        required\n                        :label=\"$tc('werkl-blog-author.detail.email.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.email.placeholder')\"\n                        :error=\"blogAuthorEmailError\"\n                    />\n                </sw-container>\n\n                <sw-container columns=\"1fr\" gap=\"32px\">\n                    <sw-text-editor\n                        v-model:value=\"blogAuthor.description\"\n                        :label=\"$tc('werkl-blog-author.detail.description.label')\"\n                        :placeholder=\"$tc('werkl-blog-author.detail.description.placeholder')\"\n                        :error=\"blogAuthorDescriptionError\"\n                    />\n                </sw-container>\n\n                <sw-upload-listener\n                    :uploadTag=\"blogAuthor.id\"\n                    auto-upload\n                    @media-upload-finish=\"onSetMediaItem\"\n                />\n\n                <sw-media-upload-v2\n                    variant=\"regular\"\n                    :allow-multi-select=\"false\"\n                    default-folder=\"werkl_blog_author\"\n                    :disabled=\"isLoading\"\n                    :file-accept=\"fileAccept\"\n                    :label=\"$tc('werkl-blog-author.detail.media.label')\"\n                    :upload-tag=\"blogAuthor.id\"\n                    :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\n                    :source=\"blogAuthor.mediaId\"\n                    @media-upload-remove-image=\"onRemoveMediaItem\"\n                    @media-drop=\"onMediaDropped\"\n                />\n            </sw-card>\n        </sw-card-view>\n    </template>\n</sw-page>\n{% endblock %}\n","import './werkl-blog-author-detail.scss';\nimport template from './werkl-blog-author-detail.html.twig';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\n\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n    ],\n\n    mixins: [\n        Mixin.getByName('notification'),\n        Mixin.getByName('salutation'),\n    ],\n\n    shortcuts: {\n        'SYSTEMKEY+S': 'onSave',\n        ESCAPE: 'onCancel',\n    },\n\n    data() {\n        return {\n            isLoading: false,\n            isSaveSuccessful: false,\n            blogAuthor: null,\n            blogAuthorCustomFieldSets: null,\n            processSuccess: false,\n            availableTags: null,\n            fileAccept: 'image/*',\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(this.identifier),\n        };\n    },\n\n    computed: {\n        identifier() {\n            return this.blogAuthor !== null ? this.salutation(this.blogAuthor) : '';\n        },\n\n        blogAuthorRepository() {\n            return this.repositoryFactory.create('werkl_blog_author');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        defaultCriteria() {\n            const criteria = new Criteria();\n            criteria\n                .addAssociation('media')\n                .addAssociation('salutation');\n\n            return criteria;\n        },\n\n        customFieldSetRepository() {\n            return this.repositoryFactory.create('custom_field_set');\n        },\n\n        customFieldSetCriteria() {\n            const criteria = new Criteria();\n\n            criteria\n                .addFilter(Criteria.equals('relations.entityName', 'werkl_blog_author'));\n\n            criteria.getAssociation('customFields')\n                .addSorting(Criteria.sort('config.customFieldPosition'));\n\n            return criteria;\n        },\n\n        ...mapPropertyErrors('blogAuthor', [\n            'firstName',\n            'lastName',\n            'displayName',\n            'email',\n            'salutationId',\n            'description',\n        ]),\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.isLoading = true;\n\n            this.blogAuthorRepository.get(\n                this.$route.params.id,\n                Shopware.Context.api,\n                this.defaultCriteria,\n            ).then((blogAuthor) => {\n                this.blogAuthor = blogAuthor;\n                this.isLoading = false;\n            });\n        },\n\n        saveFinish() {\n            this.isSaveSuccessful = false;\n        },\n\n        async onSave() {\n            this.isLoading = true;\n            this.isSaveSuccessful = false;\n\n            return this.blogAuthorRepository.save(this.blogAuthor, Shopware.Context.api).then(() => {\n                this.isLoading = false;\n                this.isSaveSuccessful = true;\n                this.createNotificationSuccess({\n                    message: this.$tc('werkl-blog-author.detail.messageSaveSuccess', {\n                        name: `${this.blogAuthor.firstName} ${this.blogAuthor.lastName}`,\n                    }),\n                });\n                this.$router.push({ name: 'blog.module.author.detail', params: { id: this.blogAuthor.id } });\n            }).catch((exception) => {\n                this.createNotificationError({\n                    message: this.$tc('global.notification.unspecifiedSaveErrorMessage'),\n                });\n                this.isLoading = false;\n                throw exception;\n            });\n        },\n\n        onCancel() {\n            this.$router.push({ name: 'werkl_blog.author.index' });\n        },\n\n        onSetMediaItem({ targetId }) {\n            this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\n                this.blogAuthor.mediaId = targetId;\n                this.blogAuthor.media = updatedMedia;\n            });\n        },\n\n        onRemoveMediaItem() {\n            this.blogAuthor.mediaId = null;\n            this.blogAuthor.media = null;\n        },\n\n        onMediaDropped(dropItem) {\n            this.onSetMediaItem({ targetId: dropItem.id });\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","mapPropertyErrors","index","criteria","blogAuthor","exception","targetId","updatedMedia","dropItem"],"mappings":"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"}