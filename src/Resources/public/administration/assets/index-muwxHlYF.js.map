{"version":3,"file":"index-muwxHlYF.js","sources":["../../../app/administration/src/module/blog-module/elements/blog/config/werkl-cms-el-config-blog.html.twig","../../../app/administration/src/module/blog-module/elements/blog/config/index.js"],"sourcesContent":["{% block werkl_cms_element_blog_config %}\r\n<div class=\"werkl-cms-el-config-blog\">\r\n\r\n    {% block werkl_cms_element_blog_config_pagination_count %}\r\n    <mt-number-field\r\n        v-model=\"element.config.paginationCount.value\"\r\n        number-type=\"int\"\r\n        :allow-empty=\"false\"\r\n        :min=\"1\"\r\n        :max=\"null\"\r\n        :digits=\"2\"\r\n        :label=\"$tc('werkl-blog.elements.blog.config.paginationCount')\"\r\n    />\r\n    {% endblock %}\r\n\r\n    {% block werkl_cms_element_blog_config_show_type %}\r\n    <mt-select\r\n        v-model=\"element.config.showType.value\"\r\n        :options=\"showTypeOptions\"\r\n        :label=\"$tc('werkl-blog.elements.blog.config.showType.label')\"\r\n    />\r\n    {% endblock %}\r\n\r\n\r\n    {% block werkl_cms_element_blog_config_blog_categories %}\r\n    <werkl-blog-category-tree-field\r\n        v-if=\"element.config.showType.value === 'select'\"\r\n        :categories-collection=\"blogCategoryCollection\"\r\n        :label=\"$tc('werkl-blog.elements.blog.config.blogCategories.label')\"\r\n        :placeholder=\"$tc('werkl-blog.elements.blog.config.blogCategories.placeholder')\"\r\n        class=\"sw-product-detail__select-category\"\r\n        @selection-add=\"onBlogCategoriesChange\"\r\n        @selection-remove=\"onBlogCategoriesChange\"\r\n    />\r\n    {% endblock %}\r\n\r\n    {% block werkl_cms_element_blog_config_show_tags %}\r\n    <mt-select\r\n        v-model=\"element.config.showTags.value\"\r\n        :options=\"showTagsOptions\"\r\n        :label=\"$tc('werkl-blog.elements.blog.config.showTags.label')\"\r\n    />\r\n    {% endblock %}\r\n\r\n    {% block werkl_cms_element_blog_config_tags %}\r\n    <sw-entity-tag-select\r\n        v-if=\"element.config.showTags.value === 'select'\"\r\n        v-model:entity-collection=\"tagCollection\"\r\n        :label=\"$tc('werkl-blog.elements.blog.config.blogTags.label')\"\r\n        :placeholder=\"$tc('werkl-blog.elements.blog.config.blogTags.placeholder')\"\r\n        @update:entity-collection=\"onTagsChange\"\r\n    />\r\n    {% endblock %}\r\n\r\n    {% block werkl_cms_element_blog_config_filter %}\r\n    <sw-card\r\n        :title=\"$tc('werkl-blog.elements.blog.config.showFilter.label')\"\r\n        :hero=\"false\"\r\n        :isLoading=\"false\"\r\n        :large=\"false\"\r\n        class=\"werkl-cms-el-config-blog-filter\">\r\n\r\n        {% block block_werkl_cms_element_blog_config_filter_show_category %}\r\n        <mt-checkbox\r\n            v-model:checked=\"element.config.showCategoryFilter.value\"\r\n            :label=\"$tc('werkl-blog.elements.blog.config.showFilter.options.filter.category')\"\r\n        />\r\n        {% endblock %}\r\n\r\n        {% block block_werkl_cms_element_blog_config_filter_show_author %}\r\n        <mt-checkbox\r\n            v-model:checked=\"element.config.showAuthorFilter.value\"\r\n            :label=\"$tc('werkl-blog.elements.blog.config.showFilter.options.filter.author')\"\r\n        />\r\n        {% endblock %}\r\n    </sw-card>\r\n    {% endblock %}\r\n\r\n</div>\r\n{% endblock %}\r\n","import template from './werkl-cms-el-config-blog.html.twig';\r\nimport './werkl-cms-el-config-blog.scss';\r\n\r\nconst { Mixin } = Shopware;\r\nconst { EntityCollection, Criteria } = Shopware.Data;\r\n\r\nexport default {\r\n    template,\r\n\r\n    inject: ['repositoryFactory'],\r\n\r\n    emits: ['element-update'],\r\n\r\n    mixins: [\r\n        Mixin.getByName('cms-element'),\r\n    ],\r\n\r\n    data() {\r\n        return {\r\n            blogCategoryCollection: null,\r\n            tagCollection: null,\r\n        };\r\n    },\r\n    computed: {\r\n        blogCategoryRepository() {\r\n            return this.repositoryFactory.create('werkl_blog_category');\r\n        },\r\n\r\n        tagRepository() {\r\n            return this.repositoryFactory.create('tag');\r\n        },\r\n\r\n        showTypeOptions() {\r\n            return [\r\n                {\r\n                    id: 1,\r\n                    value: 'all',\r\n                    label: this.$tc('werkl-blog.elements.blog.config.showType.options.all'),\r\n                },\r\n                {\r\n                    id: 2,\r\n                    value: 'select',\r\n                    label: this.$tc('werkl-blog.elements.blog.config.showType.options.select'),\r\n                },\r\n            ];\r\n        },\r\n\r\n        showTagsOptions() {\r\n            return [\r\n                {\r\n                    id: 1,\r\n                    value: 'all',\r\n                    label: this.$tc('werkl-blog.elements.blog.config.showTags.options.all'),\r\n                },\r\n                {\r\n                    id: 2,\r\n                    value: 'select',\r\n                    label: this.$tc('werkl-blog.elements.blog.config.showTags.options.select'),\r\n                },\r\n            ];\r\n        },\r\n    },\r\n\r\n    created() {\r\n        this.createdComponent();\r\n    },\r\n\r\n    methods: {\r\n        async createdComponent() {\r\n            this.initElementConfig('blog');\r\n            this.initElementData('blog');\r\n\r\n            await this.loadBlogCategories();\r\n            await this.loadTags();\r\n        },\r\n\r\n        async loadBlogCategories() {\r\n            this.blogCategoryCollection = new EntityCollection(\r\n                this.blogCategoryRepository.route,\r\n                this.blogCategoryRepository.schema.entity,\r\n                Shopware.Context.api\r\n            );\r\n\r\n            if (this.element.config.blogCategories.value.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            const criteria = new Criteria();\r\n            criteria.setIds(this.element.config.blogCategories.value);\r\n\r\n            this.blogCategoryCollection = await this.blogCategoryRepository.search(criteria, Shopware.Context.api);\r\n        },\r\n\r\n        async loadTags() {\r\n            this.tagCollection = new EntityCollection(\r\n                this.tagRepository.route,\r\n                this.tagRepository.schema.entity,\r\n                Shopware.Context.api\r\n            );\r\n\r\n            if (this.element.config.blogTags.value.length <= 0) {\r\n                return;\r\n            }\r\n\r\n            const criteria = new Criteria();\r\n            criteria.setIds(this.element.config.blogTags.value);\r\n\r\n            this.tagCollection = await this.tagRepository.search(criteria, Shopware.Context.api);\r\n        },\r\n\r\n        onBlogCategoriesChange() {\r\n            this.element.config.blogCategories.value = this.blogCategoryCollection.getIds();\r\n\r\n            if (this.element.translated?.config?.blogCategories) {\r\n                this.element.translated.config.blogCategories = this.blogCategoryCollection.getIds();\r\n            }\r\n\r\n            if (!this.element?.data) {\r\n                return;\r\n            }\r\n\r\n            this.element.data.blogCategories = this.blogCategoryCollection;\r\n        },\r\n\r\n        onTagsChange() {\r\n            this.element.config.blogTags.value = this.tagCollection.getIds();\r\n\r\n            if (this.element.translated?.config?.blogTags) {\r\n                this.element.translated.config.blogTags = this.tagCollection.getIds();\r\n            }\r\n\r\n            if (!this.element?.data) {\r\n                return;\r\n            }\r\n\r\n            this.element.data.blogTags = this.tagCollection;\r\n        },\r\n    },\r\n};\r\n"],"names":["template","Mixin","EntityCollection","Criteria","index","criteria","_a","_b","_c"],"mappings":"AAAA,MAAeA,EAAA,szECGT,CAAE,MAAAC,CAAO,EAAG,SACZ,CAAE,iBAAAC,EAAkB,SAAAC,GAAa,SAAS,KAEjCC,EAAA,CACX,SAAAJ,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CAChC,EAED,MAAO,CACH,MAAO,CACH,uBAAwB,KACxB,cAAe,IAC3B,CACK,EACD,SAAU,CACN,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CAC7D,EAED,eAAgB,CACZ,OAAO,KAAK,kBAAkB,OAAO,KAAK,CAC7C,EAED,iBAAkB,CACd,MAAO,CACH,CACI,GAAI,EACJ,MAAO,MACP,MAAO,KAAK,IAAI,sDAAsD,CACzE,EACD,CACI,GAAI,EACJ,MAAO,SACP,MAAO,KAAK,IAAI,yDAAyD,CAC5E,CACjB,CACS,EAED,iBAAkB,CACd,MAAO,CACH,CACI,GAAI,EACJ,MAAO,MACP,MAAO,KAAK,IAAI,sDAAsD,CACzE,EACD,CACI,GAAI,EACJ,MAAO,SACP,MAAO,KAAK,IAAI,yDAAyD,CAC5E,CACjB,CACS,CACJ,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,QAAS,CACL,MAAM,kBAAmB,CACrB,KAAK,kBAAkB,MAAM,EAC7B,KAAK,gBAAgB,MAAM,EAE3B,MAAM,KAAK,qBACX,MAAM,KAAK,UACd,EAED,MAAM,oBAAqB,CAOvB,GANA,KAAK,uBAAyB,IAAIC,EAC9B,KAAK,uBAAuB,MAC5B,KAAK,uBAAuB,OAAO,OACnC,SAAS,QAAQ,GACjC,EAEgB,KAAK,QAAQ,OAAO,eAAe,MAAM,QAAU,EACnD,OAGJ,MAAMG,EAAW,IAAIF,EACrBE,EAAS,OAAO,KAAK,QAAQ,OAAO,eAAe,KAAK,EAExD,KAAK,uBAAyB,MAAM,KAAK,uBAAuB,OAAOA,EAAU,SAAS,QAAQ,GAAG,CACxG,EAED,MAAM,UAAW,CAOb,GANA,KAAK,cAAgB,IAAIH,EACrB,KAAK,cAAc,MACnB,KAAK,cAAc,OAAO,OAC1B,SAAS,QAAQ,GACjC,EAEgB,KAAK,QAAQ,OAAO,SAAS,MAAM,QAAU,EAC7C,OAGJ,MAAMG,EAAW,IAAIF,EACrBE,EAAS,OAAO,KAAK,QAAQ,OAAO,SAAS,KAAK,EAElD,KAAK,cAAgB,MAAM,KAAK,cAAc,OAAOA,EAAU,SAAS,QAAQ,GAAG,CACtF,EAED,wBAAyB,CD9GjC,IAAAC,EAAAC,EAAAC,EC+GY,KAAK,QAAQ,OAAO,eAAe,MAAQ,KAAK,uBAAuB,UAEnED,GAAAD,EAAA,KAAK,QAAQ,aAAb,YAAAA,EAAyB,SAAzB,MAAAC,EAAiC,iBACjC,KAAK,QAAQ,WAAW,OAAO,eAAiB,KAAK,uBAAuB,WAG3EC,EAAA,KAAK,UAAL,MAAAA,EAAc,OAInB,KAAK,QAAQ,KAAK,eAAiB,KAAK,uBAC3C,EAED,cAAe,CD5HvB,IAAAF,EAAAC,EAAAC,EC6HY,KAAK,QAAQ,OAAO,SAAS,MAAQ,KAAK,cAAc,UAEpDD,GAAAD,EAAA,KAAK,QAAQ,aAAb,YAAAA,EAAyB,SAAzB,MAAAC,EAAiC,WACjC,KAAK,QAAQ,WAAW,OAAO,SAAW,KAAK,cAAc,WAG5DC,EAAA,KAAK,UAAL,MAAAA,EAAc,OAInB,KAAK,QAAQ,KAAK,SAAW,KAAK,cACrC,CACJ,CACL"}