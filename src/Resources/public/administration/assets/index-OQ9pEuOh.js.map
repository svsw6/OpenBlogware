{"version":3,"file":"index-OQ9pEuOh.js","sources":["../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/werkl-blog-author-detail.html.twig","../../../app/administration/src/module/blog-module/page/werkl-blog-author/werkl-blog-author-detail/index.js"],"sourcesContent":["{% block werkl_blog_author_detail %}\r\n<sw-page class=\"werkl-blog-author-detail\">\r\n    <template #smart-bar-header>\r\n        <h2>\r\n            {% block werkl_blog_author_detail_smart_bar_header_title_text %}\r\n            {{ salutation(blogAuthor) || $tc('werkl-blog-author.detail.title') }}\r\n            {% endblock %}\r\n        </h2>\r\n    </template>\r\n\r\n    <template #smart-bar-actions>\r\n        <mt-button\r\n            variant=\"secondary\"\r\n            size=\"default\"\r\n            @click=\"$router.push({ name: 'blog.module.author.index' })\"\r\n        >\r\n            {{ $tc('werkl-blog-author.detail.buttonCancel') }}\r\n        </mt-button>\r\n\r\n        <sw-button-process\r\n            :is-loading=\"isLoading\"\r\n            :process-success=\"processSuccess\"\r\n            variant=\"primary\"\r\n            @update:process-success=\"saveFinish\"\r\n            @click=\"onSave\"\r\n        >\r\n            {{ $tc('werkl-blog-author.detail.buttonSave') }}\r\n        </sw-button-process>\r\n\r\n    </template>\r\n\r\n    <template #content>\r\n        <sw-card-view>\r\n            <sw-card v-if=\"blogAuthor\" :isLoading=\"isLoading\" :title=\"$tc('werkl-blog-author.detail.title')\">\r\n                <sw-container columns=\"2fr 4fr 4fr\" gap=\"16px\">\r\n                    <sw-entity-single-select\r\n                        v-model:value=\"blogAuthor.salutationId\"\r\n                        class=\"werkl-blog-author-base-form__salutation-select\"\r\n                        entity=\"salutation\"\r\n                        label-property=\"displayName\"\r\n                        required\r\n                        :label=\"$tc('werkl-blog-author.detail.salutation.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.salutation.placeholder')\"\r\n                        :error=\"blogAuthorSalutationIdError\"\r\n                    />\r\n\r\n                    <mt-text-field\r\n                        v-model=\"blogAuthor.firstName\"\r\n                        required\r\n                        :label=\"$tc('werkl-blog-author.detail.firstName.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.firstName.placeholder')\"\r\n                        :error=\"blogAuthorFirstNameError\"\r\n                    />\r\n\r\n                    <mt-text-field\r\n                        v-model=\"blogAuthor.lastName\"\r\n                        required\r\n                        :label=\"$tc('werkl-blog-author.detail.lastName.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.lastName.placeholder')\"\r\n                        :error=\"blogAuthorLastNameError\"\r\n                    />\r\n                </sw-container>\r\n\r\n                <sw-container columns=\"6fr 4fr\" gap=\"24px\">\r\n                    <mt-text-field\r\n                        v-model=\"blogAuthor.displayName\"\r\n                        :label=\"$tc('werkl-blog-author.detail.displayName.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.displayName.placeholder')\"\r\n                        :error=\"blogAuthorDisplayNameError\"\r\n                    />\r\n\r\n                    <mt-text-field\r\n                        v-model=\"blogAuthor.email\"\r\n                        required\r\n                        :label=\"$tc('werkl-blog-author.detail.email.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.email.placeholder')\"\r\n                        :error=\"blogAuthorEmailError\"\r\n                    />\r\n                </sw-container>\r\n\r\n                <sw-container columns=\"1fr\" gap=\"32px\">\r\n                    <sw-text-editor\r\n                        v-model:value=\"blogAuthor.description\"\r\n                        :label=\"$tc('werkl-blog-author.detail.description.label')\"\r\n                        :placeholder=\"$tc('werkl-blog-author.detail.description.placeholder')\"\r\n                        :error=\"blogAuthorDescriptionError\"\r\n                    />\r\n                </sw-container>\r\n\r\n                <sw-upload-listener\r\n                    :uploadTag=\"blogAuthor.id\"\r\n                    auto-upload\r\n                    @media-upload-finish=\"onSetMediaItem\"\r\n                />\r\n\r\n                <sw-media-upload-v2\r\n                    variant=\"regular\"\r\n                    :allow-multi-select=\"false\"\r\n                    default-folder=\"werkl_blog_author\"\r\n                    :disabled=\"isLoading\"\r\n                    :file-accept=\"fileAccept\"\r\n                    :label=\"$tc('werkl-blog-author.detail.media.label')\"\r\n                    :upload-tag=\"blogAuthor.id\"\r\n                    :caption=\"$tc('sw-cms.elements.general.config.caption.mediaUpload')\"\r\n                    :source=\"blogAuthor.mediaId\"\r\n                    @media-upload-remove-image=\"onRemoveMediaItem\"\r\n                    @media-drop=\"onMediaDropped\"\r\n                />\r\n            </sw-card>\r\n        </sw-card-view>\r\n    </template>\r\n</sw-page>\r\n{% endblock %}\r\n","import './werkl-blog-author-detail.scss';\r\nimport template from './werkl-blog-author-detail.html.twig';\r\n\r\nconst { Mixin } = Shopware;\r\nconst { Criteria } = Shopware.Data;\r\nconst { mapPropertyErrors } = Shopware.Component.getComponentHelper();\r\n\r\nexport default {\r\n    template,\r\n\r\n    inject: [\r\n        'repositoryFactory',\r\n    ],\r\n\r\n    mixins: [\r\n        Mixin.getByName('notification'),\r\n        Mixin.getByName('salutation'),\r\n    ],\r\n\r\n    shortcuts: {\r\n        'SYSTEMKEY+S': 'onSave',\r\n        ESCAPE: 'onCancel',\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            isLoading: false,\r\n            isSaveSuccessful: false,\r\n            blogAuthor: null,\r\n            blogAuthorCustomFieldSets: null,\r\n            processSuccess: false,\r\n            availableTags: null,\r\n            fileAccept: 'image/*',\r\n        };\r\n    },\r\n\r\n    metaInfo() {\r\n        return {\r\n            title: this.$createTitle(this.identifier),\r\n        };\r\n    },\r\n\r\n    computed: {\r\n        identifier() {\r\n            return this.blogAuthor !== null ? this.salutation(this.blogAuthor) : '';\r\n        },\r\n\r\n        blogAuthorRepository() {\r\n            return this.repositoryFactory.create('werkl_blog_author');\r\n        },\r\n\r\n        mediaRepository() {\r\n            return this.repositoryFactory.create('media');\r\n        },\r\n\r\n        defaultCriteria() {\r\n            const criteria = new Criteria();\r\n            criteria\r\n                .addAssociation('media')\r\n                .addAssociation('salutation');\r\n\r\n            return criteria;\r\n        },\r\n\r\n        customFieldSetRepository() {\r\n            return this.repositoryFactory.create('custom_field_set');\r\n        },\r\n\r\n        customFieldSetCriteria() {\r\n            const criteria = new Criteria();\r\n\r\n            criteria\r\n                .addFilter(Criteria.equals('relations.entityName', 'werkl_blog_author'));\r\n\r\n            criteria.getAssociation('customFields')\r\n                .addSorting(Criteria.sort('config.customFieldPosition'));\r\n\r\n            return criteria;\r\n        },\r\n\r\n        ...mapPropertyErrors('blogAuthor', [\r\n            'firstName',\r\n            'lastName',\r\n            'displayName',\r\n            'email',\r\n            'salutationId',\r\n            'description',\r\n        ]),\r\n    },\r\n\r\n    created() {\r\n        this.createdComponent();\r\n    },\r\n\r\n    methods: {\r\n        createdComponent() {\r\n            this.isLoading = true;\r\n\r\n            this.blogAuthorRepository.get(\r\n                this.$route.params.id,\r\n                Shopware.Context.api,\r\n                this.defaultCriteria,\r\n            ).then((blogAuthor) => {\r\n                this.blogAuthor = blogAuthor;\r\n                this.isLoading = false;\r\n            });\r\n        },\r\n\r\n        saveFinish() {\r\n            this.isSaveSuccessful = false;\r\n        },\r\n\r\n        async onSave() {\r\n            this.isLoading = true;\r\n            this.isSaveSuccessful = false;\r\n\r\n            return this.blogAuthorRepository.save(this.blogAuthor, Shopware.Context.api).then(() => {\r\n                this.isLoading = false;\r\n                this.isSaveSuccessful = true;\r\n                this.createNotificationSuccess({\r\n                    message: this.$tc('werkl-blog-author.detail.messageSaveSuccess', {\r\n                        name: `${this.blogAuthor.firstName} ${this.blogAuthor.lastName}`,\r\n                    }),\r\n                });\r\n                this.$router.push({ name: 'blog.module.author.detail', params: { id: this.blogAuthor.id } });\r\n            }).catch((exception) => {\r\n                this.createNotificationError({\r\n                    message: this.$tc('global.notification.unspecifiedSaveErrorMessage'),\r\n                });\r\n                this.isLoading = false;\r\n                throw exception;\r\n            });\r\n        },\r\n\r\n        onCancel() {\r\n            this.$router.push({ name: 'werkl_blog.author.index' });\r\n        },\r\n\r\n        onSetMediaItem({ targetId }) {\r\n            this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\r\n                this.blogAuthor.mediaId = targetId;\r\n                this.blogAuthor.media = updatedMedia;\r\n            });\r\n        },\r\n\r\n        onRemoveMediaItem() {\r\n            this.blogAuthor.mediaId = null;\r\n            this.blogAuthor.media = null;\r\n        },\r\n\r\n        onMediaDropped(dropItem) {\r\n            this.onSetMediaItem({ targetId: dropItem.id });\r\n        },\r\n    },\r\n};\r\n"],"names":["template","Mixin","Criteria","mapPropertyErrors","index","criteria","blogAuthor","exception","targetId","updatedMedia","dropItem"],"mappings":"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"}