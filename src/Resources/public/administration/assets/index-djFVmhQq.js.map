{"version":3,"file":"index-djFVmhQq.js","sources":["../../../app/administration/src/module/blog-module/elements/blog-single-select/config/werkl-cms-el-config-blog-single-select.html.twig","../../../app/administration/src/module/blog-module/elements/blog-single-select/config/index.js"],"sourcesContent":["{% block werkl_cms_element_blog_single_select_config %}\n<div class=\"werkl-cms-el-config-blog-single-select\">\n    {% block werkl_cms_element_blog_single_select_config_blog_entry %}\n    <sw-entity-single-select\n        v-model:value=\"element.config.blogEntry.value\"\n        :label=\"$tc('werkl-blog.elements.blogSingleSelect.selectFieldLabel')\"\n        :placeholder=\"$tc('werkl-blog.elements.blogSingleSelect.selectFieldLabel')\"\n        entity=\"werkl_blog_entry\"\n        label-property=\"title\"\n        show-clearable-button\n        @update:value=\"onBlogEntryChange\"\n    />\n    {% endblock %}\n</div>\n{% endblock %}\n","import template from './werkl-cms-el-config-blog-single-select.html.twig';\n\nconst { Mixin } = Shopware;\nconst { Criteria } = Shopware.Data;\n\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    computed: {\n        blogEntryRepository() {\n            return this.repositoryFactory.create('werkl_blog_entry');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        createdComponent() {\n            this.initElementConfig('blog-single-select');\n        },\n\n        onBlogEntryChange(blogEntryId) {\n            if (!blogEntryId) {\n                this.element.config.blogEntry.value = null;\n                this.element.data.blogEntry = null;\n            } else {\n                const criteria = new Criteria();\n                criteria.addAssociation('blogCategories');\n\n                this.blogEntryRepository.get(blogEntryId, Shopware.Context.api, criteria).then((blogEntry) => {\n                    this.element.config.blogEntry.value = blogEntryId;\n\n                    if (!blogEntry.translated.mediaId) {\n                        this.element.data.blogEntry = blogEntry;\n\n                        return;\n                    }\n\n                    this.mediaRepository.get(blogEntry.translated.mediaId).then((media) => {\n                        blogEntry.media = media;\n                        this.element.data.blogEntry = blogEntry;\n                    });\n                });\n            }\n\n            this.$emit('element-update', this.element);\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","blogEntryId","criteria","blogEntry","media"],"mappings":"AAAA,MAAAA,EAAe,6hBCET,CAAE,MAAAC,CAAK,EAAK,SACZ,CAAE,SAAAC,CAAQ,EAAK,SAAS,KAE9BC,EAAe,CACX,SAAAH,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CACrC,EAEI,SAAU,CACN,qBAAsB,CAClB,OAAO,KAAK,kBAAkB,OAAO,kBAAkB,CACnE,EAEQ,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CACxD,CACA,EAEI,SAAU,CACN,KAAK,iBAAgB,CAC7B,EAEI,QAAS,CACL,kBAAmB,CACf,KAAK,kBAAkB,oBAAoB,CACvD,EAEQ,kBAAkBG,EAAa,CAC3B,GAAI,CAACA,EACD,KAAK,QAAQ,OAAO,UAAU,MAAQ,KACtC,KAAK,QAAQ,KAAK,UAAY,SAC3B,CACH,MAAMC,EAAW,IAAIH,EACrBG,EAAS,eAAe,gBAAgB,EAExC,KAAK,oBAAoB,IAAID,EAAa,SAAS,QAAQ,IAAKC,CAAQ,EAAE,KAAMC,GAAc,CAG1F,GAFA,KAAK,QAAQ,OAAO,UAAU,MAAQF,EAElC,CAACE,EAAU,WAAW,QAAS,CAC/B,KAAK,QAAQ,KAAK,UAAYA,EAE9B,MACxB,CAEoB,KAAK,gBAAgB,IAAIA,EAAU,WAAW,OAAO,EAAE,KAAMC,GAAU,CACnED,EAAU,MAAQC,EAClB,KAAK,QAAQ,KAAK,UAAYD,CACtD,CAAqB,CACrB,CAAiB,CACjB,CAEY,KAAK,MAAM,iBAAkB,KAAK,OAAO,CACrD,CACA,CACA"}