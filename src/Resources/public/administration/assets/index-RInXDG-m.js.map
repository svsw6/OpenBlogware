{"version":3,"file":"index-RInXDG-m.js","sources":["../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/werkl-cms-sidebar.html.twig","../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/index.js"],"sourcesContent":["{% block sw_cms_sidebar_page_settings %}\r\n<sw-sidebar-item\r\n    ref=\"blogConfigSidebar\"\r\n    icon=\"regular-info-circle\"\r\n    badge-type=\"error\"\r\n    :title=\"$tc('werkl-blog.detail.sidebar.heading')\"\r\n    :has-simple-badge=\"OpenBlogwareDetailError\"\r\n    :disabled=\"page.locked || disabled\"\r\n>\r\n    {% block werkl_blog_cms_sidebar_page_basic_information %}\r\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\r\n        {% block werkl_blog_cms_sidebar_page_basic_information_header %}\r\n        <template #header>\r\n            <span>{{ $tc('werkl-blog.detail.sidebar.basicInformation') }}</span>\r\n        </template>\r\n        {% endblock %}\r\n\r\n        {% block werkl_blog_cms_sidebar_page_basic_information_form %}\r\n        <template #content>\r\n            <div class=\"sw-cms-sidebar__settings\">\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_title_field %}\r\n                <mt-text-field\r\n                    v-model=\"blog.title\"\r\n                    required\r\n                    :label=\"$tc('werkl-blog.detail.titleLabel')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.titlePlaceholder')\"\r\n                    :error=\"blogTitleError\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_slug_field %}\r\n                <mt-text-field\r\n                    v-model=\"blog.slug\"\r\n                    required\r\n                    disabled\r\n                    :label=\"$tc('werkl-blog.detail.slugLabel')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.slugPlaceholder')\"\r\n                    :error=\"blogSlugError\"\r\n                />\r\n                {% endblock %}\r\n\r\n                <div class=\"sw-field\">\r\n                    <span class=\"sw-field__label\">URL</span>\r\n                    <a\r\n                        :href=\"`/blog/${blog.slug}`\"\r\n                        target=\"_blank\"\r\n                        class=\"werkl-blog-preview\"\r\n                    >\r\n                        /blog/{{blog.slug}}\r\n                    </a>\r\n                </div>\r\n\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_teaser_field %}\r\n                <mt-textarea\r\n                    v-model=\"blog.teaser\"\r\n                    :label=\"$tc('werkl-blog.detail.teaserLabel')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.teaserPlaceholder')\"\r\n                    :error=\"blogTeaserError\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_basic_information_image_field %}\r\n                <sw-upload-listener\r\n                    :uploadTag=\"blog.id\"\r\n                    auto-upload\r\n                    @media-upload-finish=\"onSetMediaItem\"\r\n                />\r\n\r\n                <sw-media-compact-upload-v2\r\n                    variant=\"regular\"\r\n                    :label=\"$tc('werkl-blog.detail.teaserImageLabel')\"\r\n                    :source=\"mediaItem\"\r\n                    :upload-tag=\"blog.id\"\r\n                    :default-folder=\"blog.getEntityName()\"\r\n                    :allow-multi-select=\"false\"\r\n                    :file-accept=\"fileAccept\"\r\n                    @media-upload-remove-image=\"onRemoveMediaItem\"\r\n                    @selection-change=\"setMedia\"\r\n                    @media-drop=\"onMediaDropped\"\r\n                />\r\n                {% endblock %}\r\n            </div>\r\n        </template>\r\n        {% endblock %}\r\n    </sw-sidebar-collapse>\r\n    {% endblock %}\r\n\r\n    {% block werkl_blog_cms_sidebar_page_settings %}\r\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\r\n        {% block werkl_blog_cms_sidebar_page_settings_header %}\r\n        <template #header>\r\n            <span>{{ $tc('werkl-blog.detail.sidebar.settings') }}</span>\r\n        </template>\r\n        {% endblock %}\r\n\r\n        {% block werkl_blog_cms_sidebar_page_settings_form %}\r\n        <template #content>\r\n            <div class=\"sw-cms-sidebar__settings\">\r\n                {% block werkl_blog_cms_sidebar_page_settings_visibility_field %}\r\n                <mt-switch\r\n                    v-model=\"blog.active\"\r\n                    class=\"werkl-field--switch\"\r\n                    :label=\"$tc('werkl-blog.detail.visibility.label')\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_detail_teaser_field %}\r\n                <mt-switch\r\n                    v-model=\"blog.detailTeaserImage\"\r\n                    class=\"werkl-field--switch\"\r\n                    :label=\"$tc('werkl-blog.detail.detailTeaser.label')\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_published_at_field %}\r\n                <mt-datepicker\r\n                    v-model=\"blog.publishedAt\"\r\n                    date-type=\"date\"\r\n                    required\r\n                    class=\"werkl-field--published-at\"\r\n                    :label=\"$tc('werkl-blog.detail.publishedAtLabel')\"\r\n                    :error=\"blogPublishedAtError\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_author_field %}\r\n                <sw-entity-single-select\r\n                    v-model:value=\"blog.authorId\"\r\n                    required\r\n                    class=\"werkl-field--author\"\r\n                    entity=\"werkl_blog_author\"\r\n                    :label=\"$tc('werkl-blog.detail.author.label')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.author.placeholder')\"\r\n                    :error=\"blogAuthorIdError\"\r\n                >\r\n                    <template #selection-label-property=\"{item}\">\r\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\r\n                    </template>\r\n\r\n                    <template #result-label-property=\"{item}\">\r\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\r\n                    </template>\r\n                </sw-entity-single-select>\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_sales_channels %}\r\n                <sw-entity-multi-id-select\r\n                    v-model:value=\"blogSalesChannelIds\"\r\n                    :repository=\"salesChannelRepository\"\r\n                    class=\"werkl-field--sales-channels\"\r\n                    :label=\"$tc('werkl-blog.detail.salesChannels.labelSalesChannels')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.salesChannels.placeholderSalesChannels')\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_category_field %}\r\n                <werkl-blog-category-tree-field\r\n                    v-model:value=\"blog.blogCategories\"\r\n                    :categories-collection=\"blog.blogCategories\"\r\n                    class=\"werkl-field--category\"\r\n                    required\r\n                    :label=\"$tc('werkl-blog.detail.category.label')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.category.placeholder')\"\r\n                    :error=\"blogBlogCategoriesError\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_settings_tags %}\r\n                <sw-entity-tag-select\r\n                    v-if=\"blog && !isLoading\"\r\n                    v-model:entity-collection=\"blog.tags\"\r\n                    class=\"sw-blog-detail-base__tags\"\r\n                    :label=\"$tc('werkl-blog.detail.tagsLabel')\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.tagsPlaceholder')\"\r\n                />\r\n                {% endblock %}\r\n            </div>\r\n        </template>\r\n        {% endblock %}\r\n    </sw-sidebar-collapse>\r\n    {% endblock %}\r\n\r\n    {% block werkl_blog_cms_sidebar_page_serp %}\r\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\r\n        {% block werkl_blog_cms_sidebar_page_serp_header %}\r\n        <template #header>\r\n            <span>{{ $tc('werkl-blog.detail.serp.title') }}</span>\r\n        </template>\r\n        {% endblock %}\r\n\r\n        {% block werkl_blog_cms_sidebar_page_serp_form %}\r\n        <template #content>\r\n            <div class=\"sw-cms-sidebar__settings serp-preview-card\">\r\n                <div class=\"serp-preview\">\r\n                    <h3>{{ blog.metaTitle }}</h3>\r\n                    <cite>{{ blog.slug }}</cite>\r\n                    <p>{{ blog.metaDescription }}</p>\r\n                </div>\r\n\r\n                {% block werkl_blog_cms_sidebar_page_serp_meta_title_field %}\r\n                <mt-text-field\r\n                    v-model=\"blog.metaTitle\"\r\n                    :max-length=\"maximumMetaTitleCharacter\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.serp.metaTitle')\"\r\n                />\r\n                {% endblock %}\r\n\r\n                {% block werkl_blog_cms_sidebar_page_serp_meta_description_field %}\r\n                <mt-textarea\r\n                    v-model=\"blog.metaDescription\"\r\n                    :max-length=\"maximumMetaDescriptionCharacter\"\r\n                    :placeholder=\"$tc('werkl-blog.detail.serp.metaDescription')\"\r\n                />\r\n                {% endblock %}\r\n            </div>\r\n        </template>\r\n        {% endblock %}\r\n    </sw-sidebar-collapse>\r\n    {% endblock %}\r\n</sw-sidebar-item>\r\n{% endblock %}\r\n\r\n{% block sw_cms_sidebar_layout_assignment %}\r\n    {% block werkl_blog_cms_sidebar_extension_component %}\r\n    <werkl-blog-extension-component-sections\r\n        :position-identifier=\"positionIdentifierExtension\"\r\n        class=\"werkl-extension-component\"\r\n    >\r\n        <template #default=\"{ componentSection }\">\r\n            <sw-sidebar-item\r\n                v-if=\"componentSection\"\r\n                :icon=\"componentSection.props.icon\"\r\n                badge-type=\"error\"\r\n                :title=\"componentSection.props.title\"\r\n                :disabled=\"page.locked || disabled\"\r\n            >\r\n                <sw-iframe-renderer\r\n                    :src=\"componentSection.src\"\r\n                    :location-id=\"componentSection.props.locationId\"\r\n                />\r\n            </sw-sidebar-item>\r\n        </template>\r\n    </werkl-blog-extension-component-sections>\r\n    {% endblock %}\r\n{% endblock %}\r\n","import errorConfig from '../../../../error-config.json';\r\nimport template from './werkl-cms-sidebar.html.twig';\r\nimport './werkl-cms-sidebar.scss';\r\n\r\nconst { Component } = Shopware;\r\nconst {\r\n    mapPageErrors,\r\n    mapPropertyErrors,\r\n} = Component.getComponentHelper();\r\n\r\nexport default {\r\n    template,\r\n\r\n    inject: [\r\n        'repositoryFactory',\r\n        'systemConfigApiService',\r\n    ],\r\n\r\n    props: {\r\n        blog: {\r\n            type: Object,\r\n            default: () => ({}),\r\n        },\r\n    },\r\n\r\n    data() {\r\n        return {\r\n            fileAccept: 'image/*',\r\n            maximumMetaTitleCharacter: 160,\r\n            maximumMetaDescriptionCharacter: 160,\r\n        };\r\n    },\r\n\r\n    created() {\r\n        this.createdComponent();\r\n    },\r\n\r\n    mounted() {\r\n        this.openBlogDetailSideBar();\r\n    },\r\n\r\n    computed: {\r\n        blogSalesChannelIds: {\r\n            get() {\r\n                return this.blog.customFields?.salesChannelIds || []\r\n            },\r\n\r\n            set(value) {\r\n                let salesChannelIds = null;\r\n                if (value && value.length > 0) {\r\n                    salesChannelIds = value;\r\n                }\r\n\r\n                this.blog.customFields = {\r\n                    ...this.blog.customFields,\r\n                    salesChannelIds,\r\n                }\r\n            },\r\n        },\r\n\r\n        salesChannelRepository() {\r\n            return this.repositoryFactory.create('sales_channel');\r\n        },\r\n\r\n        mediaRepository() {\r\n            return this.repositoryFactory.create('media');\r\n        },\r\n\r\n        tagRepository() {\r\n            return this.repositoryFactory.create('tag');\r\n        },\r\n\r\n        positionIdentifierExtension() {\r\n            return 'werkl-cms-sidebar-extension';\r\n        },\r\n\r\n        mediaItem() {\r\n            return this.blog && this.blog.media;\r\n        },\r\n\r\n        ...mapPageErrors(errorConfig),\r\n\r\n        ...mapPropertyErrors('blog', [\r\n            'title',\r\n            'slug',\r\n            'teaser',\r\n            'authorId',\r\n            'publishedAt',\r\n            'blogCategories',\r\n        ]),\r\n    },\r\n\r\n    methods: {\r\n        createdComponent() {\r\n            this.systemConfigApiService.getValues('WerklOpenBlogware.config').then(config => {\r\n                this.maximumMetaTitleCharacter = config['WerklOpenBlogware.config.maximumMetaTitleCharacter'];\r\n                this.maximumMetaDescriptionCharacter = config['WerklOpenBlogware.config.maximumMetaDescriptionCharacter'];\r\n            });\r\n        },\r\n\r\n        onSetMediaItem({ targetId }) {\r\n            return this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\r\n                this.blog.mediaId = targetId;\r\n                this.blog.media = updatedMedia;\r\n            });\r\n        },\r\n\r\n        setMedia([mediaItem]) {\r\n            this.blog.mediaId = mediaItem.id;\r\n            this.blog.media = mediaItem;\r\n        },\r\n\r\n        onRemoveMediaItem() {\r\n            this.blog.mediaId = null;\r\n            this.blog.media = null;\r\n        },\r\n\r\n        onMediaDropped(dropItem) {\r\n            this.onSetMediaItem({ targetId: dropItem.id });\r\n        },\r\n\r\n        openBlogDetailSideBar() {\r\n            this.$nextTick(() => {\r\n                if (!this.$refs.sidebarItem) {\r\n                    return;\r\n                }\r\n\r\n                if (typeof this.$refs.sidebarItem.openContent !== 'function') {\r\n                    return;\r\n                }\r\n\r\n                this.$refs.sidebarItem.openContent();\r\n            });\r\n        },\r\n    },\r\n};\r\n"],"names":["template","Component","mapPageErrors","mapPropertyErrors","index","_a","value","salesChannelIds","errorConfig","config","targetId","updatedMedia","mediaItem","dropItem"],"mappings":"sHAAeA,EAAA,+iNCIT,CAAE,UAAAC,CAAW,EAAG,SAChB,CACF,cAAAC,EACA,kBAAAC,CACJ,EAAIF,EAAU,qBAECG,EAAA,CACX,SAAAJ,EAEA,OAAQ,CACJ,oBACA,wBACH,EAED,MAAO,CACH,KAAM,CACF,KAAM,OACN,QAAS,KAAO,CAAA,EACnB,CACJ,EAED,MAAO,CACH,MAAO,CACH,WAAY,UACZ,0BAA2B,IAC3B,gCAAiC,GAC7C,CACK,EAED,SAAU,CACN,KAAK,iBAAgB,CACxB,EAED,SAAU,CACN,KAAK,sBAAqB,CAC7B,EAED,SAAU,CACN,oBAAqB,CACjB,KAAM,OACF,QAAOK,EAAA,KAAK,KAAK,eAAV,YAAAA,EAAwB,kBAAmB,CAAE,CACvD,EAED,IAAIC,EAAO,CACP,IAAIC,EAAkB,KAClBD,GAASA,EAAM,OAAS,IACxBC,EAAkBD,GAGtB,KAAK,KAAK,aAAe,CACrB,GAAG,KAAK,KAAK,aACb,gBAAAC,CACH,CACJ,CACJ,EAED,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CACvD,EAED,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CAC/C,EAED,eAAgB,CACZ,OAAO,KAAK,kBAAkB,OAAO,KAAK,CAC7C,EAED,6BAA8B,CAC1B,MAAO,6BACV,EAED,WAAY,CACR,OAAO,KAAK,MAAQ,KAAK,KAAK,KACjC,EAED,GAAGL,EAAcM,CAAW,EAE5B,GAAGL,EAAkB,OAAQ,CACzB,QACA,OACA,SACA,WACA,cACA,gBACZ,CAAS,CACJ,EAED,QAAS,CACL,kBAAmB,CACf,KAAK,uBAAuB,UAAU,0BAA0B,EAAE,KAAKM,GAAU,CAC7E,KAAK,0BAA4BA,EAAO,oDAAoD,EAC5F,KAAK,gCAAkCA,EAAO,0DAA0D,CACxH,CAAa,CACJ,EAED,eAAe,CAAE,SAAAC,GAAY,CACzB,OAAO,KAAK,gBAAgB,IAAIA,EAAU,SAAS,QAAQ,GAAG,EAAE,KAAMC,GAAiB,CACnF,KAAK,KAAK,QAAUD,EACpB,KAAK,KAAK,MAAQC,CAClC,CAAa,CACJ,EAED,SAAS,CAACC,CAAS,EAAG,CAClB,KAAK,KAAK,QAAUA,EAAU,GAC9B,KAAK,KAAK,MAAQA,CACrB,EAED,mBAAoB,CAChB,KAAK,KAAK,QAAU,KACpB,KAAK,KAAK,MAAQ,IACrB,EAED,eAAeC,EAAU,CACrB,KAAK,eAAe,CAAE,SAAUA,EAAS,EAAI,CAAA,CAChD,EAED,uBAAwB,CACpB,KAAK,UAAU,IAAM,CACZ,KAAK,MAAM,aAIZ,OAAO,KAAK,MAAM,YAAY,aAAgB,YAIlD,KAAK,MAAM,YAAY,aACvC,CAAa,CACJ,CACJ,CACL"}