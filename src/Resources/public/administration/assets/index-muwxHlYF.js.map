{"version":3,"file":"index-muwxHlYF.js","sources":["../../../app/administration/src/module/blog-module/elements/blog/config/werkl-cms-el-config-blog.html.twig","../../../app/administration/src/module/blog-module/elements/blog/config/index.js"],"sourcesContent":["{% block werkl_cms_element_blog_config %}\n<div class=\"werkl-cms-el-config-blog\">\n\n    {% block werkl_cms_element_blog_config_pagination_count %}\n    <mt-number-field\n        v-model=\"element.config.paginationCount.value\"\n        number-type=\"int\"\n        :allow-empty=\"false\"\n        :min=\"1\"\n        :max=\"null\"\n        :digits=\"2\"\n        :label=\"$tc('werkl-blog.elements.blog.config.paginationCount')\"\n    />\n    {% endblock %}\n\n    {% block werkl_cms_element_blog_config_show_type %}\n    <mt-select\n        v-model=\"element.config.showType.value\"\n        :options=\"showTypeOptions\"\n        :label=\"$tc('werkl-blog.elements.blog.config.showType.label')\"\n    />\n    {% endblock %}\n\n\n    {% block werkl_cms_element_blog_config_blog_categories %}\n    <werkl-blog-category-tree-field\n        v-if=\"element.config.showType.value === 'select'\"\n        :categories-collection=\"blogCategoryCollection\"\n        :label=\"$tc('werkl-blog.elements.blog.config.blogCategories.label')\"\n        :placeholder=\"$tc('werkl-blog.elements.blog.config.blogCategories.placeholder')\"\n        class=\"sw-product-detail__select-category\"\n        @selection-add=\"onBlogCategoriesChange\"\n        @selection-remove=\"onBlogCategoriesChange\"\n    />\n    {% endblock %}\n\n    {% block werkl_cms_element_blog_config_show_tags %}\n    <mt-select\n        v-model=\"element.config.showTags.value\"\n        :options=\"showTagsOptions\"\n        :label=\"$tc('werkl-blog.elements.blog.config.showTags.label')\"\n    />\n    {% endblock %}\n\n    {% block werkl_cms_element_blog_config_tags %}\n    <sw-entity-tag-select\n        v-if=\"element.config.showTags.value === 'select'\"\n        v-model:entity-collection=\"tagCollection\"\n        :label=\"$tc('werkl-blog.elements.blog.config.blogTags.label')\"\n        :placeholder=\"$tc('werkl-blog.elements.blog.config.blogTags.placeholder')\"\n        @update:entity-collection=\"onTagsChange\"\n    />\n    {% endblock %}\n\n    {% block werkl_cms_element_blog_config_filter %}\n    <sw-card\n        :title=\"$tc('werkl-blog.elements.blog.config.showFilter.label')\"\n        :hero=\"false\"\n        :isLoading=\"false\"\n        :large=\"false\"\n        class=\"werkl-cms-el-config-blog-filter\">\n\n        {% block block_werkl_cms_element_blog_config_filter_show_category %}\n        <mt-checkbox\n            v-model:checked=\"element.config.showCategoryFilter.value\"\n            :label=\"$tc('werkl-blog.elements.blog.config.showFilter.options.filter.category')\"\n        />\n        {% endblock %}\n\n        {% block block_werkl_cms_element_blog_config_filter_show_author %}\n        <mt-checkbox\n            v-model:checked=\"element.config.showAuthorFilter.value\"\n            :label=\"$tc('werkl-blog.elements.blog.config.showFilter.options.filter.author')\"\n        />\n        {% endblock %}\n    </sw-card>\n    {% endblock %}\n\n</div>\n{% endblock %}\n","import template from './werkl-cms-el-config-blog.html.twig';\nimport './werkl-cms-el-config-blog.scss';\n\nconst { Mixin } = Shopware;\nconst { EntityCollection, Criteria } = Shopware.Data;\n\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    emits: ['element-update'],\n\n    mixins: [\n        Mixin.getByName('cms-element'),\n    ],\n\n    data() {\n        return {\n            blogCategoryCollection: null,\n            tagCollection: null,\n        };\n    },\n    computed: {\n        blogCategoryRepository() {\n            return this.repositoryFactory.create('werkl_blog_category');\n        },\n\n        tagRepository() {\n            return this.repositoryFactory.create('tag');\n        },\n\n        showTypeOptions() {\n            return [\n                {\n                    id: 1,\n                    value: 'all',\n                    label: this.$tc('werkl-blog.elements.blog.config.showType.options.all'),\n                },\n                {\n                    id: 2,\n                    value: 'select',\n                    label: this.$tc('werkl-blog.elements.blog.config.showType.options.select'),\n                },\n            ];\n        },\n\n        showTagsOptions() {\n            return [\n                {\n                    id: 1,\n                    value: 'all',\n                    label: this.$tc('werkl-blog.elements.blog.config.showTags.options.all'),\n                },\n                {\n                    id: 2,\n                    value: 'select',\n                    label: this.$tc('werkl-blog.elements.blog.config.showTags.options.select'),\n                },\n            ];\n        },\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    methods: {\n        async createdComponent() {\n            this.initElementConfig('blog');\n            this.initElementData('blog');\n\n            await this.loadBlogCategories();\n            await this.loadTags();\n        },\n\n        async loadBlogCategories() {\n            this.blogCategoryCollection = new EntityCollection(\n                this.blogCategoryRepository.route,\n                this.blogCategoryRepository.schema.entity,\n                Shopware.Context.api\n            );\n\n            if (this.element.config.blogCategories.value.length <= 0) {\n                return;\n            }\n\n            const criteria = new Criteria();\n            criteria.setIds(this.element.config.blogCategories.value);\n\n            this.blogCategoryCollection = await this.blogCategoryRepository.search(criteria, Shopware.Context.api);\n        },\n\n        async loadTags() {\n            this.tagCollection = new EntityCollection(\n                this.tagRepository.route,\n                this.tagRepository.schema.entity,\n                Shopware.Context.api\n            );\n\n            if (this.element.config.blogTags.value.length <= 0) {\n                return;\n            }\n\n            const criteria = new Criteria();\n            criteria.setIds(this.element.config.blogTags.value);\n\n            this.tagCollection = await this.tagRepository.search(criteria, Shopware.Context.api);\n        },\n\n        onBlogCategoriesChange() {\n            this.element.config.blogCategories.value = this.blogCategoryCollection.getIds();\n\n            if (this.element.translated?.config?.blogCategories) {\n                this.element.translated.config.blogCategories = this.blogCategoryCollection.getIds();\n            }\n\n            if (!this.element?.data) {\n                return;\n            }\n\n            this.element.data.blogCategories = this.blogCategoryCollection;\n        },\n\n        onTagsChange() {\n            this.element.config.blogTags.value = this.tagCollection.getIds();\n\n            if (this.element.translated?.config?.blogTags) {\n                this.element.translated.config.blogTags = this.tagCollection.getIds();\n            }\n\n            if (!this.element?.data) {\n                return;\n            }\n\n            this.element.data.blogTags = this.tagCollection;\n        },\n    },\n};\n"],"names":["template","Mixin","EntityCollection","Criteria","index","criteria","_a","_b","_c"],"mappings":"AAAA,MAAAA,EAAe,szECGT,CAAE,MAAAC,CAAK,EAAK,SACZ,CAAE,iBAAAC,EAAkB,SAAAC,GAAa,SAAS,KAEhDC,EAAe,CACX,SAAAJ,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,MAAO,CAAC,gBAAgB,EAExB,OAAQ,CACJC,EAAM,UAAU,aAAa,CACrC,EAEI,MAAO,CACH,MAAO,CACH,uBAAwB,KACxB,cAAe,IAC3B,CACA,EACI,SAAU,CACN,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CACtE,EAEQ,eAAgB,CACZ,OAAO,KAAK,kBAAkB,OAAO,KAAK,CACtD,EAEQ,iBAAkB,CACd,MAAO,CACH,CACI,GAAI,EACJ,MAAO,MACP,MAAO,KAAK,IAAI,sDAAsD,CAC1F,EACgB,CACI,GAAI,EACJ,MAAO,SACP,MAAO,KAAK,IAAI,yDAAyD,CAC7F,CACA,CACA,EAEQ,iBAAkB,CACd,MAAO,CACH,CACI,GAAI,EACJ,MAAO,MACP,MAAO,KAAK,IAAI,sDAAsD,CAC1F,EACgB,CACI,GAAI,EACJ,MAAO,SACP,MAAO,KAAK,IAAI,yDAAyD,CAC7F,CACA,CACA,CACA,EAEI,SAAU,CACN,KAAK,iBAAgB,CAC7B,EAEI,QAAS,CACL,MAAM,kBAAmB,CACrB,KAAK,kBAAkB,MAAM,EAC7B,KAAK,gBAAgB,MAAM,EAE3B,MAAM,KAAK,mBAAkB,EAC7B,MAAM,KAAK,SAAQ,CAC/B,EAEQ,MAAM,oBAAqB,CAOvB,GANA,KAAK,uBAAyB,IAAIC,EAC9B,KAAK,uBAAuB,MAC5B,KAAK,uBAAuB,OAAO,OACnC,SAAS,QAAQ,GACjC,EAEgB,KAAK,QAAQ,OAAO,eAAe,MAAM,QAAU,EACnD,OAGJ,MAAMG,EAAW,IAAIF,EACrBE,EAAS,OAAO,KAAK,QAAQ,OAAO,eAAe,KAAK,EAExD,KAAK,uBAAyB,MAAM,KAAK,uBAAuB,OAAOA,EAAU,SAAS,QAAQ,GAAG,CACjH,EAEQ,MAAM,UAAW,CAOb,GANA,KAAK,cAAgB,IAAIH,EACrB,KAAK,cAAc,MACnB,KAAK,cAAc,OAAO,OAC1B,SAAS,QAAQ,GACjC,EAEgB,KAAK,QAAQ,OAAO,SAAS,MAAM,QAAU,EAC7C,OAGJ,MAAMG,EAAW,IAAIF,EACrBE,EAAS,OAAO,KAAK,QAAQ,OAAO,SAAS,KAAK,EAElD,KAAK,cAAgB,MAAM,KAAK,cAAc,OAAOA,EAAU,SAAS,QAAQ,GAAG,CAC/F,EAEQ,wBAAyB,CD9GjC,IAAAC,EAAAC,EAAAC,EC+GY,KAAK,QAAQ,OAAO,eAAe,MAAQ,KAAK,uBAAuB,OAAM,GAEzED,GAAAD,EAAA,KAAK,QAAQ,aAAb,YAAAA,EAAyB,SAAzB,MAAAC,EAAiC,iBACjC,KAAK,QAAQ,WAAW,OAAO,eAAiB,KAAK,uBAAuB,OAAM,IAGjFC,EAAA,KAAK,UAAL,MAAAA,EAAc,OAInB,KAAK,QAAQ,KAAK,eAAiB,KAAK,uBACpD,EAEQ,cAAe,CD5HvB,IAAAF,EAAAC,EAAAC,EC6HY,KAAK,QAAQ,OAAO,SAAS,MAAQ,KAAK,cAAc,OAAM,GAE1DD,GAAAD,EAAA,KAAK,QAAQ,aAAb,YAAAA,EAAyB,SAAzB,MAAAC,EAAiC,WACjC,KAAK,QAAQ,WAAW,OAAO,SAAW,KAAK,cAAc,OAAM,IAGlEC,EAAA,KAAK,UAAL,MAAAA,EAAc,OAInB,KAAK,QAAQ,KAAK,SAAW,KAAK,cAC9C,CACA,CACA"}