const l=`{% block werkl_blog_author_detail %} <sw-page class="werkl-blog-author-detail"> <template #smart-bar-header> <h2> {% block werkl_blog_author_detail_smart_bar_header_title_text %} {{ salutation(blogAuthor) || $tc('werkl-blog-author.detail.title') }} {% endblock %} </h2> </template> <template #smart-bar-actions> <mt-button variant="secondary" size="default" @click="$router.push({ name: 'blog.module.author.index' })" > {{ $tc('werkl-blog-author.detail.buttonCancel') }} </mt-button> <sw-button-process :is-loading="isLoading" :process-success="processSuccess" variant="primary" @update:process-success="saveFinish" @click="onSave" > {{ $tc('werkl-blog-author.detail.buttonSave') }} </sw-button-process> </template> <template #content> <sw-card-view> <sw-card v-if="blogAuthor" :isLoading="isLoading" :title="$tc('werkl-blog-author.detail.title')"> <sw-container columns="2fr 4fr 4fr" gap="16px"> <sw-entity-single-select v-model:value="blogAuthor.salutationId" class="werkl-blog-author-base-form__salutation-select" entity="salutation" label-property="displayName" required :label="$tc('werkl-blog-author.detail.salutation.label')" :placeholder="$tc('werkl-blog-author.detail.salutation.placeholder')" :error="blogAuthorSalutationIdError" /> <mt-text-field v-model="blogAuthor.firstName" required :label="$tc('werkl-blog-author.detail.firstName.label')" :placeholder="$tc('werkl-blog-author.detail.firstName.placeholder')" :error="blogAuthorFirstNameError" /> <mt-text-field v-model="blogAuthor.lastName" required :label="$tc('werkl-blog-author.detail.lastName.label')" :placeholder="$tc('werkl-blog-author.detail.lastName.placeholder')" :error="blogAuthorLastNameError" /> </sw-container> <sw-container columns="6fr 4fr" gap="24px"> <mt-text-field v-model="blogAuthor.displayName" :label="$tc('werkl-blog-author.detail.displayName.label')" :placeholder="$tc('werkl-blog-author.detail.displayName.placeholder')" :error="blogAuthorDisplayNameError" /> <mt-text-field v-model="blogAuthor.email" required :label="$tc('werkl-blog-author.detail.email.label')" :placeholder="$tc('werkl-blog-author.detail.email.placeholder')" :error="blogAuthorEmailError" /> </sw-container> <sw-container columns="1fr" gap="32px"> <sw-text-editor v-model:value="blogAuthor.description" :label="$tc('werkl-blog-author.detail.description.label')" :placeholder="$tc('werkl-blog-author.detail.description.placeholder')" :error="blogAuthorDescriptionError" /> </sw-container> <sw-upload-listener :uploadTag="blogAuthor.id" auto-upload @media-upload-finish="onSetMediaItem" /> <sw-media-upload-v2 variant="regular" :allow-multi-select="false" default-folder="werkl_blog_author" :disabled="isLoading" :file-accept="fileAccept" :label="$tc('werkl-blog-author.detail.media.label')" :upload-tag="blogAuthor.id" :caption="$tc('sw-cms.elements.general.config.caption.mediaUpload')" :source="blogAuthor.mediaId" @media-upload-remove-image="onRemoveMediaItem" @media-drop="onMediaDropped" /> </sw-card> </sw-card-view> </template> </sw-page> {% endblock %}`,{Mixin:o}=Shopware,{Criteria:t}=Shopware.Data,{mapPropertyErrors:r}=Shopware.Component.getComponentHelper(),i={template:l,inject:["repositoryFactory"],mixins:[o.getByName("notification"),o.getByName("salutation")],shortcuts:{"SYSTEMKEY+S":"onSave",ESCAPE:"onCancel"},data(){return{isLoading:!1,isSaveSuccessful:!1,blogAuthor:null,blogAuthorCustomFieldSets:null,processSuccess:!1,availableTags:null,fileAccept:"image/*"}},metaInfo(){return{title:this.$createTitle(this.identifier)}},computed:{identifier(){return this.blogAuthor!==null?this.salutation(this.blogAuthor):""},blogAuthorRepository(){return this.repositoryFactory.create("werkl_blog_author")},mediaRepository(){return this.repositoryFactory.create("media")},defaultCriteria(){const e=new t;return e.addAssociation("media").addAssociation("salutation"),e},customFieldSetRepository(){return this.repositoryFactory.create("custom_field_set")},customFieldSetCriteria(){const e=new t;return e.addFilter(t.equals("relations.entityName","werkl_blog_author")),e.getAssociation("customFields").addSorting(t.sort("config.customFieldPosition")),e},...r("blogAuthor",["firstName","lastName","displayName","email","salutationId","description"])},created(){this.createdComponent()},methods:{createdComponent(){this.isLoading=!0,this.blogAuthorRepository.get(this.$route.params.id,Shopware.Context.api,this.defaultCriteria).then(e=>{this.blogAuthor=e,this.isLoading=!1})},saveFinish(){this.isSaveSuccessful=!1},async onSave(){return this.isLoading=!0,this.isSaveSuccessful=!1,this.blogAuthorRepository.save(this.blogAuthor,Shopware.Context.api).then(()=>{this.isLoading=!1,this.isSaveSuccessful=!0,this.createNotificationSuccess({message:this.$tc("werkl-blog-author.detail.messageSaveSuccess",{name:`${this.blogAuthor.firstName} ${this.blogAuthor.lastName}`})}),this.$router.push({name:"blog.module.author.detail",params:{id:this.blogAuthor.id}})}).catch(e=>{throw this.createNotificationError({message:this.$tc("global.notification.unspecifiedSaveErrorMessage")}),this.isLoading=!1,e})},onCancel(){this.$router.push({name:"werkl_blog.author.index"})},onSetMediaItem({targetId:e}){this.mediaRepository.get(e,Shopware.Context.api).then(a=>{this.blogAuthor.mediaId=e,this.blogAuthor.media=a})},onRemoveMediaItem(){this.blogAuthor.mediaId=null,this.blogAuthor.media=null},onMediaDropped(e){this.onSetMediaItem({targetId:e.id})}}};export{i as default};
//# sourceMappingURL=index-OQ9pEuOh.js.map
