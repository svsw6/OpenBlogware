{"version":3,"file":"index-DQF0lEx3.js","sources":["../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/werkl-cms-sidebar.html.twig","../../../app/administration/src/module/blog-module/extension/component/cms/werkl-cms-sidebar/index.js"],"sourcesContent":["{% block sw_cms_sidebar_page_settings %}\n<sw-sidebar-item\n    ref=\"blogConfigSidebar\"\n    icon=\"regular-info-circle\"\n    badge-type=\"error\"\n    :title=\"$tc('werkl-blog.detail.sidebar.heading')\"\n    :has-simple-badge=\"OpenBlogwareDetailError\"\n    :disabled=\"page.locked || disabled\"\n>\n    {% block werkl_blog_cms_sidebar_page_basic_information %}\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\n        {% block werkl_blog_cms_sidebar_page_basic_information_header %}\n        <template #header>\n            <span>{{ $tc('werkl-blog.detail.sidebar.basicInformation') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_basic_information_form %}\n        <template #content>\n            <div class=\"sw-cms-sidebar__settings\">\n                {% block werkl_blog_cms_sidebar_page_basic_information_title_field %}\n                <mt-text-field\n                    v-model=\"blog.title\"\n                    required\n                    :label=\"$tc('werkl-blog.detail.titleLabel')\"\n                    :placeholder=\"$tc('werkl-blog.detail.titlePlaceholder')\"\n                    :error=\"blogTitleError\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_slug_field %}\n                <mt-text-field\n                    v-model=\"blog.slug\"\n                    required\n                    :label=\"$tc('werkl-blog.detail.slugLabel')\"\n                    :placeholder=\"$tc('werkl-blog.detail.slugPlaceholder')\"\n                    :error=\"blogSlugError\"\n                />\n                {% endblock %}\n\n                <div class=\"sw-field\">\n                    <span class=\"sw-field__label\">URL</span>\n                    <a\n                        :href=\"`/blog/${blog.slug}`\"\n                        target=\"_blank\"\n                        class=\"werkl-blog-preview\"\n                    >\n                        /blog/{{blog.slug}}\n                    </a>\n                </div>\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_teaser_field %}\n                <mt-textarea\n                    v-model=\"blog.teaser\"\n                    :label=\"$tc('werkl-blog.detail.teaserLabel')\"\n                    :placeholder=\"$tc('werkl-blog.detail.teaserPlaceholder')\"\n                    :error=\"blogTeaserError\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_basic_information_image_field %}\n                <sw-upload-listener\n                    :uploadTag=\"blog.id\"\n                    auto-upload\n                    @media-upload-finish=\"onSetMediaItem\"\n                />\n\n                <sw-media-compact-upload-v2\n                    variant=\"regular\"\n                    :label=\"$tc('werkl-blog.detail.teaserImageLabel')\"\n                    :source=\"mediaItem\"\n                    :upload-tag=\"blog.id\"\n                    :default-folder=\"blog.getEntityName()\"\n                    :allow-multi-select=\"false\"\n                    :file-accept=\"fileAccept\"\n                    @media-upload-remove-image=\"onRemoveMediaItem\"\n                    @selection-change=\"setMedia\"\n                    @media-drop=\"onMediaDropped\"\n                />\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_settings %}\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\n        {% block werkl_blog_cms_sidebar_page_settings_header %}\n        <template #header>\n            <span>{{ $tc('werkl-blog.detail.sidebar.settings') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_settings_form %}\n        <template #content>\n            <div class=\"sw-cms-sidebar__settings\">\n                {% block werkl_blog_cms_sidebar_page_settings_visibility_field %}\n                <mt-switch\n                    v-model=\"blog.active\"\n                    class=\"werkl-field--switch\"\n                    :label=\"$tc('werkl-blog.detail.visibility.label')\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_detail_teaser_field %}\n                <mt-switch\n                    v-model=\"blog.detailTeaserImage\"\n                    class=\"werkl-field--switch\"\n                    :label=\"$tc('werkl-blog.detail.detailTeaser.label')\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_published_at_field %}\n                <mt-datepicker\n                    v-model=\"blog.publishedAt\"\n                    date-type=\"date\"\n                    required\n                    class=\"werkl-field--published-at\"\n                    :label=\"$tc('werkl-blog.detail.publishedAtLabel')\"\n                    :error=\"blogPublishedAtError\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_author_field %}\n                <sw-entity-single-select\n                    v-model:value=\"blog.authorId\"\n                    required\n                    class=\"werkl-field--author\"\n                    entity=\"werkl_blog_author\"\n                    :label=\"$tc('werkl-blog.detail.author.label')\"\n                    :placeholder=\"$tc('werkl-blog.detail.author.placeholder')\"\n                    :error=\"blogAuthorIdError\"\n                >\n                    <template #selection-label-property=\"{item}\">\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\n                    </template>\n\n                    <template #result-label-property=\"{item}\">\n                        <span>{{ item.firstName }} {{ item.lastName }} <i>({{ item.email }})</i></span>\n                    </template>\n                </sw-entity-single-select>\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_sales_channels %}\n                <sw-entity-multi-id-select\n                    v-model:value=\"blogSalesChannelIds\"\n                    :repository=\"salesChannelRepository\"\n                    class=\"werkl-field--sales-channels\"\n                    :label=\"$tc('werkl-blog.detail.salesChannels.labelSalesChannels')\"\n                    :placeholder=\"$tc('werkl-blog.detail.salesChannels.placeholderSalesChannels')\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_category_field %}\n                <werkl-blog-category-tree-field\n                    v-model:value=\"blog.blogCategories\"\n                    :categories-collection=\"blog.blogCategories\"\n                    class=\"werkl-field--category\"\n                    required\n                    :label=\"$tc('werkl-blog.detail.category.label')\"\n                    :placeholder=\"$tc('werkl-blog.detail.category.placeholder')\"\n                    :error=\"blogBlogCategoriesError\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_settings_tags %}\n                <sw-entity-tag-select\n                    v-if=\"blog && !isLoading\"\n                    v-model:entity-collection=\"blog.tags\"\n                    class=\"sw-blog-detail-base__tags\"\n                    :label=\"$tc('werkl-blog.detail.tagsLabel')\"\n                    :placeholder=\"$tc('werkl-blog.detail.tagsPlaceholder')\"\n                />\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n\n    {% block werkl_blog_cms_sidebar_page_serp %}\n    <sw-sidebar-collapse :expand-on-loading=\"true\">\n        {% block werkl_blog_cms_sidebar_page_serp_header %}\n        <template #header>\n            <span>{{ $tc('werkl-blog.detail.serp.title') }}</span>\n        </template>\n        {% endblock %}\n\n        {% block werkl_blog_cms_sidebar_page_serp_form %}\n        <template #content>\n            <div class=\"sw-cms-sidebar__settings serp-preview-card\">\n                <div class=\"serp-preview\">\n                    <h3>{{ blog.metaTitle }}</h3>\n                    <cite>{{ blog.slug }}</cite>\n                    <p>{{ blog.metaDescription }}</p>\n                </div>\n\n                {% block werkl_blog_cms_sidebar_page_serp_meta_title_field %}\n                <mt-text-field\n                    v-model=\"blog.metaTitle\"\n                    :max-length=\"maximumMetaTitleCharacter\"\n                    :placeholder=\"$tc('werkl-blog.detail.serp.metaTitle')\"\n                />\n                {% endblock %}\n\n                {% block werkl_blog_cms_sidebar_page_serp_meta_description_field %}\n                <mt-textarea\n                    v-model=\"blog.metaDescription\"\n                    :max-length=\"maximumMetaDescriptionCharacter\"\n                    :placeholder=\"$tc('werkl-blog.detail.serp.metaDescription')\"\n                />\n                {% endblock %}\n            </div>\n        </template>\n        {% endblock %}\n    </sw-sidebar-collapse>\n    {% endblock %}\n</sw-sidebar-item>\n{% endblock %}\n\n{% block sw_cms_sidebar_layout_assignment %}\n    {% block werkl_blog_cms_sidebar_extension_component %}\n    <werkl-blog-extension-component-sections\n        :position-identifier=\"positionIdentifierExtension\"\n        class=\"werkl-extension-component\"\n    >\n        <template #default=\"{ componentSection }\">\n            <sw-sidebar-item\n                v-if=\"componentSection\"\n                :icon=\"componentSection.props.icon\"\n                badge-type=\"error\"\n                :title=\"componentSection.props.title\"\n                :disabled=\"page.locked || disabled\"\n            >\n                <sw-iframe-renderer\n                    :src=\"componentSection.src\"\n                    :location-id=\"componentSection.props.locationId\"\n                />\n            </sw-sidebar-item>\n        </template>\n    </werkl-blog-extension-component-sections>\n    {% endblock %}\n{% endblock %}\n","import errorConfig from '../../../../error-config.json';\nimport template from './werkl-cms-sidebar.html.twig';\nimport './werkl-cms-sidebar.scss';\n\nconst { Component } = Shopware;\nconst {\n    mapPageErrors,\n    mapPropertyErrors,\n} = Component.getComponentHelper();\n\nexport default {\n    template,\n\n    inject: [\n        'repositoryFactory',\n        'systemConfigApiService',\n    ],\n\n    props: {\n        blog: {\n            type: Object,\n            default: () => ({}),\n        },\n    },\n\n    data() {\n        return {\n            fileAccept: 'image/*',\n            maximumMetaTitleCharacter: 160,\n            maximumMetaDescriptionCharacter: 160,\n        };\n    },\n\n    created() {\n        this.createdComponent();\n    },\n\n    mounted() {\n        this.openBlogDetailSideBar();\n    },\n\n    computed: {\n        blogSalesChannelIds: {\n            get() {\n                return this.blog.customFields?.salesChannelIds || []\n            },\n\n            set(value) {\n                let salesChannelIds = null;\n                if (value && value.length > 0) {\n                    salesChannelIds = value;\n                }\n\n                this.blog.customFields = {\n                    ...this.blog.customFields,\n                    salesChannelIds,\n                }\n            },\n        },\n\n        salesChannelRepository() {\n            return this.repositoryFactory.create('sales_channel');\n        },\n\n        mediaRepository() {\n            return this.repositoryFactory.create('media');\n        },\n\n        tagRepository() {\n            return this.repositoryFactory.create('tag');\n        },\n\n        positionIdentifierExtension() {\n            return 'werkl-cms-sidebar-extension';\n        },\n\n        mediaItem() {\n            return this.blog && this.blog.media;\n        },\n\n        ...mapPageErrors(errorConfig),\n\n        ...mapPropertyErrors('blog', [\n            'title',\n            'slug',\n            'teaser',\n            'authorId',\n            'publishedAt',\n            'blogCategories',\n        ]),\n    },\n\n    methods: {\n        createdComponent() {\n            this.systemConfigApiService.getValues('WerklOpenBlogware.config').then(config => {\n                this.maximumMetaTitleCharacter = config['WerklOpenBlogware.config.maximumMetaTitleCharacter'];\n                this.maximumMetaDescriptionCharacter = config['WerklOpenBlogware.config.maximumMetaDescriptionCharacter'];\n            });\n        },\n\n        onSetMediaItem({ targetId }) {\n            return this.mediaRepository.get(targetId, Shopware.Context.api).then((updatedMedia) => {\n                this.blog.mediaId = targetId;\n                this.blog.media = updatedMedia;\n            });\n        },\n\n        setMedia([mediaItem]) {\n            this.blog.mediaId = mediaItem.id;\n            this.blog.media = mediaItem;\n        },\n\n        onRemoveMediaItem() {\n            this.blog.mediaId = null;\n            this.blog.media = null;\n        },\n\n        onMediaDropped(dropItem) {\n            this.onSetMediaItem({ targetId: dropItem.id });\n        },\n\n        openBlogDetailSideBar() {\n            this.$nextTick(() => {\n                if (!this.$refs.sidebarItem) {\n                    return;\n                }\n\n                if (typeof this.$refs.sidebarItem.openContent !== 'function') {\n                    return;\n                }\n\n                this.$refs.sidebarItem.openContent();\n            });\n        },\n    },\n};\n"],"names":["template","Component","mapPageErrors","mapPropertyErrors","index","_a","value","salesChannelIds","errorConfig","config","targetId","updatedMedia","mediaItem","dropItem"],"mappings":"sHAAAA,EAAe,siNCIT,CAAE,UAAAC,CAAS,EAAK,SAChB,CACF,cAAAC,EACA,kBAAAC,CACJ,EAAIF,EAAU,mBAAkB,EAEhCG,EAAe,CACX,SAAAJ,EAEA,OAAQ,CACJ,oBACA,wBACR,EAEI,MAAO,CACH,KAAM,CACF,KAAM,OACN,QAAS,KAAO,CAAA,EAC5B,CACA,EAEI,MAAO,CACH,MAAO,CACH,WAAY,UACZ,0BAA2B,IAC3B,gCAAiC,GAC7C,CACA,EAEI,SAAU,CACN,KAAK,iBAAgB,CAC7B,EAEI,SAAU,CACN,KAAK,sBAAqB,CAClC,EAEI,SAAU,CACN,oBAAqB,CACjB,KAAM,OACF,QAAOK,EAAA,KAAK,KAAK,eAAV,YAAAA,EAAwB,kBAAmB,CAAA,CAClE,EAEY,IAAIC,EAAO,CACP,IAAIC,EAAkB,KAClBD,GAASA,EAAM,OAAS,IACxBC,EAAkBD,GAGtB,KAAK,KAAK,aAAe,CACrB,GAAG,KAAK,KAAK,aACb,gBAAAC,CACpB,CACA,CACA,EAEQ,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,eAAe,CAChE,EAEQ,iBAAkB,CACd,OAAO,KAAK,kBAAkB,OAAO,OAAO,CACxD,EAEQ,eAAgB,CACZ,OAAO,KAAK,kBAAkB,OAAO,KAAK,CACtD,EAEQ,6BAA8B,CAC1B,MAAO,6BACnB,EAEQ,WAAY,CACR,OAAO,KAAK,MAAQ,KAAK,KAAK,KAC1C,EAEQ,GAAGL,EAAcM,CAAW,EAE5B,GAAGL,EAAkB,OAAQ,CACzB,QACA,OACA,SACA,WACA,cACA,gBACZ,CAAS,CACT,EAEI,QAAS,CACL,kBAAmB,CACf,KAAK,uBAAuB,UAAU,0BAA0B,EAAE,KAAKM,GAAU,CAC7E,KAAK,0BAA4BA,EAAO,oDAAoD,EAC5F,KAAK,gCAAkCA,EAAO,0DAA0D,CACxH,CAAa,CACb,EAEQ,eAAe,CAAE,SAAAC,GAAY,CACzB,OAAO,KAAK,gBAAgB,IAAIA,EAAU,SAAS,QAAQ,GAAG,EAAE,KAAMC,GAAiB,CACnF,KAAK,KAAK,QAAUD,EACpB,KAAK,KAAK,MAAQC,CAClC,CAAa,CACb,EAEQ,SAAS,CAACC,CAAS,EAAG,CAClB,KAAK,KAAK,QAAUA,EAAU,GAC9B,KAAK,KAAK,MAAQA,CAC9B,EAEQ,mBAAoB,CAChB,KAAK,KAAK,QAAU,KACpB,KAAK,KAAK,MAAQ,IAC9B,EAEQ,eAAeC,EAAU,CACrB,KAAK,eAAe,CAAE,SAAUA,EAAS,EAAE,CAAE,CACzD,EAEQ,uBAAwB,CACpB,KAAK,UAAU,IAAM,CACZ,KAAK,MAAM,aAIZ,OAAO,KAAK,MAAM,YAAY,aAAgB,YAIlD,KAAK,MAAM,YAAY,YAAW,CAClD,CAAa,CACb,CACA,CACA"}