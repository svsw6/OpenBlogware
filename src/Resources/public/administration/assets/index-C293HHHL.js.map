{"version":3,"file":"index-C293HHHL.js","sources":["../../../app/administration/src/module/blog-module/page/werkl-blog-list/werkl-blog-list.html.twig","../../../app/administration/src/module/blog-module/page/werkl-blog-list/index.js"],"sourcesContent":["{% block werkl_blog_list %}\n<sw-page class=\"werkl-blog-list\">\n    <template #smart-bar-header>\n        <h2>\n            {% block werkl_blog_list_smart_bar_header_title_text %}\n            {{ $tc('werkl-blog.list.textBlogOverview') }}\n            {% endblock %}\n\n            {% block werkl_blog_list_smart_bar_header_amount %}\n            <span v-if=\"!isLoading\" class=\"sw-page__smart-bar-amount\">\n                ({{ total }})\n            </span>\n            {% endblock %}\n        </h2>\n    </template>\n\n    <template #language-switch>\n        <sw-language-switch @on-change=\"changeLanguage\" />\n    </template>\n\n    {% block werkl_blog_list_smart_bar_actions %}\n    <template #smart-bar-actions>\n        {% block werkl_blog_list_smart_bar_actions_add %}\n        <mt-button\n            variant=\"primary\"\n            size=\"default\"\n            @click=\"$router.push({ name: 'blog.module.create' })\"\n        >\n            {{ $tc('werkl-blog.list.buttonAddBlogEntry') }}\n        </mt-button>\n\n        <mt-button\n            variant=\"secondary\"\n            size=\"default\"\n            @click=\"openSponsorPage\"\n        >\n            {{ $tc('werkl-blog.list.buttonSponsor') }}\n        </mt-button>\n        {% endblock %}\n    </template>\n    {% endblock %}\n\n    <template #sidebar>\n        <werkl-blog-vertical-tabs />\n    </template>\n\n    <template #side-content>\n        {% block werkl_blog_category_side_content %}\n        <werkl-blog-category-tree\n            :categoryId=\"categoryId\"\n            :currentLanguageId=\"currentLanguageId\"\n            @update:categoryId=\"changeCategoryId\"\n        />\n        {% endblock %}\n    </template>\n\n    <template #content>\n        {% block werkl_blog_list_content %}\n        <sw-entity-listing\n            v-if=\"blogEntries\"\n            :items=\"blogEntries\"\n            :repository=\"blogEntryRepository\"\n            :show-selection=\"false\"\n            :columns=\"columns\"\n            detail-route=\"blog.module.detail\"\n        >\n            {% block werkl_blog_list_grid_columns_name %}\n            <template #column-active=\"{ item, isInlineEdit }\">\n                {% block werkl_blog_list_grid_columns_name_inline_edit %}\n                <template v-if=\"isInlineEdit\">\n                    <mt-checkbox v-model:checked=\"item.active\" />\n                </template>\n                {% endblock %}\n\n                {% block werkl_blog_list_grid_columns_name_content %}\n                <template v-else>\n                    <mt-icon\n                        v-if=\"item.active\"\n                        name=\"regular-checkmark-xs\"\n                        size=\"16px\"\n                        class=\"is--active\"\n                    />\n                    <mt-icon\n                        v-else\n                        name=\"regular-times-xs\"\n                        size=\"16px\"\n                        class=\"is--inactive\"\n                    />\n                </template>\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            {% block werkl_blog_list_grid_columns_author %}\n            <template #column-author=\"{ item }\">\n                {% block werkl_blog_list_grid_columns_author_content %}\n                <router-link :to=\"{ name: 'blog.module.author.detail', params: { id: item.authorId } }\">\n                    {{ salutation(item.blogAuthor) }}\n                </router-link>\n                {% endblock %}\n            </template>\n            {% endblock %}\n\n            {% block werkl_blog_list_grid_columns_published %}\n            <template #column-publishedAt=\"{ item }\">\n                {{ dateFilter(item.publishedAt, { hour: undefined, minute: undefined }) }}\n            </template>\n            {% endblock %}\n\n        </sw-entity-listing>\n        {% endblock %}\n\n        {% block werkl_blog_list_empty_state %}\n        <sw-empty-state\n            v-if=\"!isLoading && !total\"\n            :title=\"$tc('werkl-blog.list.messageEmpty')\"\n        >\n            {{ $tc('werkl-blog-author.list.messageEmpty') }}\n        </sw-empty-state>\n        {% endblock %}\n    </template>\n</sw-page>\n{% endblock %}\n","import template from './werkl-blog-list.html.twig';\nimport './werkl-blog-list.scss';\n\nconst { Mixin } = Shopware;\nconst Criteria = Shopware.Data.Criteria;\n\nexport default {\n    template,\n\n    inject: ['repositoryFactory'],\n\n    mixins: [\n        Mixin.getByName('salutation'),\n        Mixin.getByName('listing'),\n    ],\n\n    data() {\n        return {\n            categoryId: null,\n            blogEntries: null,\n            total: 0,\n            isLoading: true,\n            currentLanguageId: Shopware.Context.api.languageId,\n        };\n    },\n\n    metaInfo() {\n        return {\n            title: this.$createTitle(),\n        };\n    },\n\n    created() {\n        this.getList();\n    },\n\n    computed: {\n        blogEntryRepository() {\n            return this.repositoryFactory.create('werkl_blog_entry');\n        },\n\n        blogCategoryRepository() {\n            return this.repositoryFactory.create('werkl_blog_category');\n        },\n\n        dateFilter() {\n            return Shopware.Filter.getByName('date');\n        },\n\n        columns() {\n            return [\n                {\n                    property: 'title',\n                    dataIndex: 'title',\n                    label: this.$tc('werkl-blog.list.table.title'),\n                    routerLink: 'blog.module.detail',\n                    primary: true,\n                    inlineEdit: 'string',\n                },\n                {\n                    property: 'author',\n                    label: this.$tc('werkl-blog.list.table.author'),\n                    inlineEdit: false,\n                },\n                {\n                    property: 'publishedAt',\n                    label: this.$tc('werkl-blog.list.table.publishedAt'),\n                    inlineEdit: false,\n                },\n                {\n                    property: 'active',\n                    label: this.$tc('werkl-blog.list.table.active'),\n                    inlineEdit: 'boolean',\n                },\n            ];\n        },\n    },\n\n    methods: {\n        changeLanguage(newLanguageId) {\n            this.currentLanguageId = newLanguageId;\n            this.getList();\n        },\n\n        changeCategoryId(categoryId) {\n            if (categoryId && categoryId !== this.categoryId) {\n                this.categoryId = categoryId;\n                this.getList();\n            }\n        },\n\n        getList() {\n            this.isLoading = true;\n            const criteria = new Criteria(this.page, this.limit);\n            criteria.addAssociation('blogAuthor');\n            criteria.addAssociation('blogCategories');\n            criteria.addAssociation('tags');\n\n            criteria.addSorting(Criteria.sort('publishedAt', 'DESC', false));\n\n            if (this.categoryId) {\n                criteria.addFilter(Criteria.equals('blogCategories.id', this.categoryId));\n            }\n            return this.blogEntryRepository.search(criteria, Shopware.Context.api).then((result) => {\n                this.total = result.total;\n                this.blogEntries = result;\n                this.isLoading = false;\n            });\n        },\n\n        openSponsorPage() {\n            window.open('https://github.com/sponsors/7underlines', '_blank');\n        },\n    },\n};\n"],"names":["template","Mixin","Criteria","index","newLanguageId","categoryId","criteria","result"],"mappings":"AAAA,MAAAA,EAAe,ivFCGT,CAAE,MAAAC,CAAK,EAAK,SACZC,EAAW,SAAS,KAAK,SAE/BC,EAAe,CACX,SAAAH,EAEA,OAAQ,CAAC,mBAAmB,EAE5B,OAAQ,CACJC,EAAM,UAAU,YAAY,EAC5BA,EAAM,UAAU,SAAS,CACjC,EAEI,MAAO,CACH,MAAO,CACH,WAAY,KACZ,YAAa,KACb,MAAO,EACP,UAAW,GACX,kBAAmB,SAAS,QAAQ,IAAI,UACpD,CACA,EAEI,UAAW,CACP,MAAO,CACH,MAAO,KAAK,aAAY,CACpC,CACA,EAEI,SAAU,CACN,KAAK,QAAO,CACpB,EAEI,SAAU,CACN,qBAAsB,CAClB,OAAO,KAAK,kBAAkB,OAAO,kBAAkB,CACnE,EAEQ,wBAAyB,CACrB,OAAO,KAAK,kBAAkB,OAAO,qBAAqB,CACtE,EAEQ,YAAa,CACT,OAAO,SAAS,OAAO,UAAU,MAAM,CACnD,EAEQ,SAAU,CACN,MAAO,CACH,CACI,SAAU,QACV,UAAW,QACX,MAAO,KAAK,IAAI,6BAA6B,EAC7C,WAAY,qBACZ,QAAS,GACT,WAAY,QAChC,EACgB,CACI,SAAU,SACV,MAAO,KAAK,IAAI,8BAA8B,EAC9C,WAAY,EAChC,EACgB,CACI,SAAU,cACV,MAAO,KAAK,IAAI,mCAAmC,EACnD,WAAY,EAChC,EACgB,CACI,SAAU,SACV,MAAO,KAAK,IAAI,8BAA8B,EAC9C,WAAY,SAChC,CACA,CACA,CACA,EAEI,QAAS,CACL,eAAeG,EAAe,CAC1B,KAAK,kBAAoBA,EACzB,KAAK,QAAO,CACxB,EAEQ,iBAAiBC,EAAY,CACrBA,GAAcA,IAAe,KAAK,aAClC,KAAK,WAAaA,EAClB,KAAK,QAAO,EAE5B,EAEQ,SAAU,CACN,KAAK,UAAY,GACjB,MAAMC,EAAW,IAAIJ,EAAS,KAAK,KAAM,KAAK,KAAK,EACnD,OAAAI,EAAS,eAAe,YAAY,EACpCA,EAAS,eAAe,gBAAgB,EACxCA,EAAS,eAAe,MAAM,EAE9BA,EAAS,WAAWJ,EAAS,KAAK,cAAe,OAAQ,EAAK,CAAC,EAE3D,KAAK,YACLI,EAAS,UAAUJ,EAAS,OAAO,oBAAqB,KAAK,UAAU,CAAC,EAErE,KAAK,oBAAoB,OAAOI,EAAU,SAAS,QAAQ,GAAG,EAAE,KAAMC,GAAW,CACpF,KAAK,MAAQA,EAAO,MACpB,KAAK,YAAcA,EACnB,KAAK,UAAY,EACjC,CAAa,CACb,EAEQ,iBAAkB,CACd,OAAO,KAAK,0CAA2C,QAAQ,CAC3E,CACA,CACA"}